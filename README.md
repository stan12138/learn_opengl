## OpenGL

已经尝试过好几次opengl了，从起初的pyopengl到c++的opengl，每次不是卡在assimp就是卡在arcball，然后不愿意再继续。

这一次，我重新更换了mingw编译器，昨晚似乎成功编译了ASSIMP？似乎吧，但是当我想进行测试的时候却发现上一次虽然花了那么多时间，但是我似乎完全没有留下一个规范的测试样例，现有的代码总是编译出错，我也已经忘得差不多了，几乎无力修改。

所以，这一次我准备单独创建一个仓库，稍微规范那么一点吧。

笔记的话，我也会从`archive`仓库里面迁移出来。



### 例1：窗口

1 window文件夹中，直接执行Makefile即可完成编译



### 例2：三角形

除了建立一个窗口以外，随便画点什么都是需要着色器的吧。所以这一块会构建一个着色器加载器。

现在我用的基本所有源代码都是来自`learnopengl`，我做的唯一工作是：确认在我当前的工具链下，所有代码可以成功完成编译运行

这里，我发现在使用shader类的时候，会出现程序无法运行的问题，具体检查发现是使用了文件读写功能之后，就不行了，但是诡异的是，写一个简单的文件读写代码，在codeblock里面就可以，也可以运行，但是自己运行就不可以。错误信息如下：

~~~
无法定位程序输入点 __gxx_personality_sj0位于动态链接库 test.exe上
~~~

在网上搜到[这样一个答案](https://blog.csdn.net/caimouse/article/details/79120822)，简而言之，环境变量里面有多个包含了`libstdc++-6.dll`，以至于程序不知道怎么找，解决方法里面一种就是放弃动态链接库，一种是在exe文件目录下放一个上述动态链接库，我选择前者，加一个`-static`

今天暂时到此结束吧



### 编译测试

按照之前的想法，我想做的第一件事是确保我的工具都是正常的，这里面的工具总体来说，包含了：

~~~python
glfw, glad, stb_image, GLM, Assimp
~~~

我并不着急着马上就详细学习一遍OpenGL，暂时也没太多时间，我只想保证工具正常，随时可以开始。

所以，现在我选择使用[learnopengl](https://learnopengl-cn.github.io/#_3)的代码，大概的编译一遍。

截止到今天下午，我已经编译成功了，无论是简单的窗口，几何图形，纹理，光照，相机，还是最后的模型加载，天空盒等等，当然我对源代码肯定做了一下修改，这里面的修改基本上就是删掉了`filesystem.h`相关的，直接通过std::string指定相对路径什么的，很简单的。因为我确实没做很多我认为非常有必要的记录，而且如果把这些代码放进我的代码文件夹的话，我还需要考虑加入model,texture等资源，很麻烦，所以learnopengl的代码，以及我写的makefile就不放进来了(算了，还是放一份makefile吧，省的下一次又不知道该咋办了)。

被放进来的东西都是我自己编译的库，learnopengl的代码编译所依赖的他自己写的一些mesh,model,camera,shader,vertex.vs什么的一堆东西统统不再收录。

唯一需要特别声明的是：ASSIMP，按照我在环境与编译笔记里面叙述的做应该就没问题，至于动态静态库，用的哪个？怎么指定？这应该是c++编译知识，做了一些搜索，最后我决定先不管，反正是可以用的。如果使用了动态链接库，应该需要把assimp的动态链接库放到可执行文件同一文件夹下，同时如果又报了类似上述无法定位程序输入点的错误，还是需要去mingw的目录里面拷一份`libstdc++-6.dll`出来，放到可执行文件所在文件夹。



近期，到此结束了。我对于3D里面的2D元素，以及arcball，还有picking技术等也很有兴趣，不知道什么时候会开始。



### 计划

大概会偶尔尝试推进一次。

但是我想要的是有完备的工具链然后才愿意从最基础的地方就开始。例如还是绘制三角形，即便对于这个简单的任务，我依旧想要一个着色器加载器和相机。

总而言之，我想要着色器加载器和相机。着色器加载器很简单，相机很复杂，而且这一次我还想要一个四元数相机。我并不打算真的全都自己来从头构建，至少现在不会。所以这两个东西都会直接抄别人的代码，然后做我自己想要的修改。前者来自`learnopengl`，后者来自`Rigid3D`。

相机真的很复杂，即使是改别人的，我也不知道什么时候才能改成。