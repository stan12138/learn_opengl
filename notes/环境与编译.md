## 构建环境

### 开发环境简述

开发的系统是windows，然后编译器是`mingw-w64`，不使用IDE，直接通过`makefile`在`powershell`里面进行编译。

至于编译器的配置，在`c和c++代码组织与编译`里面我已经说了，总而言之我现在用的就是一个64位的编译器，因为异常处理模型选择了`sjlj`，所以也可以通过`-m32`使用32位模式。

编译方法：我会尽量使用Makefile实现编译

我还不清楚这样做会不会为以后带来问题，这么着先，出问题再说。

### 基础依赖

这一部分要说明一下需要以来的库，以及编译方法，这一部分基本是从`archive/study_notes/c与c++代码组织与编译`中摘出来，整理的

#### 窗口生成与管理

负责窗口生成与管理的库是`glfw`，旧版的有人使用`glut`，前者要比后者有前途。

起到简化`glfw`与windows交互作用的一个库是`glad`，旧版的有人使用`glew`，同样要比后者优秀。

##### glad

glad是一个c库，直接去官网下载，按照[learnopengl](https://learnopengl-cn.github.io/01%20Getting%20started/02%20Creating%20a%20window/)上面的配置说明配置我们需要的，然后下载压缩包即可，需要的应该就是里面的c代码和头文件。

##### glfw

glfw直接下载源码，编译需要Cmake，关于这一部分我在`OpenGL笔记`里面有描述，就不细说了，这个的编译是非常顺利的，会在`example`文件夹生成很多酷炫的例子。

对于glfw需要的是`libglfw3.a`和`glfw3.h`

其余的以来就是OpenGL的库，这里主要依赖的三个库是`opengl32, glu32 gdi32`，这些已经包含在`windows`的系统库里面了，不需要额外安装



### ASSIMP

昨天晚上我又尝试了一次ASSIMP的编译，因为原本的编译丢弃了太多的支持格式，我很不满意，这一次首先是确认了编译器，再查一些资料，我还是有点信心的。

这一次的编译很奇怪，其实还是蛮顺利的，使用当前的编译器，配合Cmake，使用的assimp版本是`4.1.0`，唯一需要做出特别处理的是cmake里面的配置，我在尝试编译时遇到过`view`发生了错误，直接导致了编译终止，所以在cmake里面取消了勾选`ASSIMP_BUILD_ASSIMP_VIEW`选项，然后根据以前老的编译记录，我也勾选了`ASSIMP_BUILD_ZLIB`来创建自己的zlib，根据测试，这样config然后generate，接下来使用`mingw32-make`编译是没有问题的，虽然编译中会有巨量的警告，但是至少没有错误。

至于变异产物，就是旧笔记里面记录的，只是因为我增添了动态链接库的选项，所以还额外拥有了动态链接库。

这一次，原则上来说，我应该没有再强制删除那么多格式，assimp应该是完美的，但是因为上一次学习的记录不全，我现在没有可以成功编译的代码，没办法测试编译成果。

额外，[这个网页](https://bruceoutdoors.wordpress.com/2014/08/22/building-assimp-3-with-mingw-4-8/)告诉我们，可以加一个`release`，似乎这样是编译出来体积会小一些的吧，我也忘了对比了。

所以，现在就是这样。

还可以在编译完后的`test`文件夹发现一个`unit.exe`，可以在命令行运行一下，看起来是一个类似单元测试什么的，从结果来看，我还是有两个测试没通过。

还会生成一个`test.3mf`，win10可以直接打开。

今天到此为止了。